---
title: 데이터 통합 시 엔터티 일치
description: 엔터티를 일치시켜 통합 고객 프로필을 만듭니다.
ms.date: 02/23/2021
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: adkuppa
ms.author: adkuppa
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 50b11e7d6f62d7a25eb25a0f2b1c4ad7d859def1
ms.sourcegitcommit: 0b754d194d765afef70d1008db7b347dd1f0ee40
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 06/24/2021
ms.locfileid: "6306036"
---
# <a name="match-entities"></a>엔터티 매칭

일치 단계에서는 데이터 집합을 통합된 고객 프로필 데이터 집합으로 결합하는 방법을 지정합니다. 데이터 통합 프로세스에서 [지도 단계](map-entities.md)를 완료한 후 엔티티를 일치시킬 준비가 되었습니다. 일치 단계에는 매핑된 엔터티가 두 개 이상 필요합니다.

일치 페이지는 다음 세 섹션으로 구성됩니다. 
- 일치하는 레코드 수를 요약하는 키 메트릭
- 엔티티 간 일치를 위한 일치 순서 및 규칙
- 일치 엔터티의 중복 제거 규칙

## <a name="specify-the-match-order"></a>일치 순서를 지정합니다.

**데이터** > **통합** > **일치** 로 이동하고 **순서 설정** 을 선택하여 일치 단계를 시작합니다.

각 일치 항목은 둘 이상의 엔터티를 하나의 통합 엔터티로 통합합니다. 동시에 고유한 고객 레코드를 유지합니다. 예를 들어, 기본 엔터티로 **eCommerce:eCommerceContacts** 를, 두 번째 엔터티로 **LoyaltyScheme:loyCustomers** 를 이렇게 두 개의 엔티티를 선택했습니다. 엔티티의 순서는 시스템이 레코드를 일치시키려고 시도하는 순서를 지정합니다.

:::image type="content" source="media/match-page.png" alt-text="데이터 통합 프로세스의 Unify 영역에 있는 일치 페이지의 스크린샷입니다.":::
  
기본 엔터티 *eCommerce:eCommerceContacts* 는 다음 엔터티인 *LoyaltyScheme:loyCustomers* 와 일치합니다. 항목이 두 개 이상인 경우 첫 번째 일치 단계의 결과 데이터 집합은 다음 항목과 일치합니다.

> [!IMPORTANT]
> 기본 엔터티로 선택하는 엔터티는 통합 마스터 데이터 집합의 기초가 됩니다. 일치 단계 중에 선택된 추가 엔터티가 이 엔터티에 추가됩니다. 이것은 통합 엔터티가 이 엔터티에 포함된 *모든* 데이터를 포함한다는 것을 의미하지 않습니다.
>
> 엔터티의 계층 구조를 선택하는 데 도움이 되는 두 가지 고려 사항이 있습니다.
>
> - 고객에 대한 가장 완전하고 신뢰할 수 있는 프로필 데이터를 기본 엔터티로 선택하십시오.
> - 다른 엔티티(예: 이름, 전화번호 또는 이메일 주소)와 공통된 여러 속성이 있는 엔티티를 기본 엔티티로 선택하십시오.

일치 순서를 지정하면 정의된 일치 쌍을 **데이터** > **Unify** > **일치** 의 **일치하는 레코드 세부 정보** 섹션에서 볼 수 있습니다. 키 메트릭은 일치 프로세스가 완료될 때까지 비어 있습니다.

## <a name="define-rules-for-match-pairs"></a>일치 쌍에 대한 규칙 정의

일치 규칙은 특정 엔터티 쌍이 일치할 논리를 지정합니다.

엔터티 이름 옆에 있는 **규칙 필요** 경고는 일치 쌍에 대해 일치 규칙이 정의되지 않았음을 나타냅니다. 

:::image type="content" source="media/match-rule-add.png" alt-text="강조 표시된 규칙을 추가할 수 있는 컨트롤이 있는 일치 레코드 세부 정보 섹션의 스크린샷입니다.":::

1. **일치하는 레코드 세부 정보** 섹션의 엔터티 아래에서 **규칙 추가** 를 선택하여 일치 규칙을 정의합니다.

1. **규칙 만들기** 창에서 규칙에 대한 조건을 구성합니다.

   :::image type="content" source="media/match-rule-conditions.png" alt-text="조건이 추가된 열린 일치 규칙의 스크린샷입니다.":::

   - **엔티티/필드(첫 번째 행)**: 관련 엔터티 및 특성을 선택하여 고객에게 고유한 레코드 속성을 지정합니다. 예를 들어 전화번호 또는 이메일 주소입니다. 활동 유형 특성으로 일치하지 마십시오. 예를 들어 구매 ID는 다른 레코드 종류에서 일치하는 항목을 찾을 수 없습니다.

   - **엔터티/필드(두 번째 행)**: 첫 번째 행에 지정된 엔티티의 특성과 관련된 특성을 선택합니다.

   - **정규화**: 선택한 특성에 대해 다음 정규화 옵션에서 선택합니다. 
     - 공백: 모든 공백을 제거합니다. *Hello   World* 는 *HelloWorld* 가 됩니다.
     - 기호: 모든 기호와 특수 문자를 제거합니다. *머리&어깨* 는 *머리어깨* 가 됩니다.
     - 텍스트를 소문자로: 모든 문자를 소문자로 변환합니다. *ALL CAPS and Title Case* 는 *all caps and title case* 가 됩니다.
     - 유니코드를 ASCII로: 유니코드 표기법을 ASCII 문자로 변환합니다. */u00B2* 는 *2* 가 됩니다.
     - 숫자: 로마 숫자와 같은 다른 숫자 체계를 아라비아 숫자로 변환합니다. *VIII* 는 *8* 이 됩니다.
     - 의미 체계 형식: 이름, 제목, 전화번호, 주소 등을 표준화합니다. 

   - **정밀도**: 이 조건에 적용할 정밀도 수준을 설정합니다. 
     - **기본**: *최저*, *보통*, *최고*, 및 *정확* 에서 선택합니다. 100%와 일치하는 레코드만 일치하도록 **정확** 을 선택합니다. 100% 동일하지 않은 레코드와 일치하도록 다른 수준 중 하나를 선택합니다.
     - **사용자 지정**: 레코드가 일치해야 하는 비율을 설정합니다. 시스템은이 임계값을 통과하는 일치 레코드만 일치시킵니다.

1. 규칙의 **명칭** 을 입력합니다.

1. [더 많은 조건을 추가](#add-conditions-to-a-rule)하거나 **완료** 를 선택하여 규칙을 마무리합니다.

1. 선택적으로 [더 많은 규칙을 추가](#add-rules-to-a-match-pair)할 수 있습니다.

1. **저장** 을 선택하여 변경 내용을 적용합니다.

### <a name="add-conditions-to-a-rule"></a>규칙에 조건 추가

특성이 여러 조건을 충족하는 경우에만 엔터티를 일치시키려면 일치 규칙에 조건을 더 추가하십시오. 조건은 논리 AND 연산자로 연결되므로 모든 조건이 충족되는 경우에만 실행됩니다.

1. **데이터** > **Unify** > **일치** 로 이동하고 조건을 추가하려는 규칙에서 **편집** 을 선택합니다.

1. **편집 규칙** 창에서 **조건 추가** 를 선택합니다.

1. **완료** 를 선택하여 규칙을 저장합니다.

### <a name="add-rules-to-a-match-pair"></a>일치 쌍에 규칙 추가

일치 규칙은 조건 집합을 나타냅니다. 여러 특성을 기반으로 하여 조건별로 엔터티를 일치시키려면 더 많은 규칙을 추가함

1.  **데이터** > **Unify** > **일치** 로 이동하고 규칙을 추가하려는 엔터티에서 **규칙 추가** 를 선택합니다.

2. [일치 쌍에 대한 규칙 정의](#define-rules-for-match-pairs)의 단계를 따르십시오.

> [!NOTE]
> 규칙의 순서가 중요합니다. 일치 알고리즘은 첫 번째 규칙을 기준으로 일치를 시도하고 첫 번째 규칙과 일치하는 항목이 없는 경우에만 두 번째 규칙으로 계속합니다.

### <a name="change-the-entity-order-in-match-rules"></a>일치 규칙에서 엔터티 순서 변경

일치 규칙의 엔터티를 다시 정렬하여 처리 순서를 변경할 수 있습니다. 변경된 순서로 인해 충돌하는 규칙은 제거됩니다. 업데이트된 구성으로 제거된 규칙은 다시 만들어야 합니다.

1. **데이터** > **통합** > **일치** 로 이동하여 **편집** 을 선택합니다.

1. **규칙 편집** 창에서 **위/아래로 이동** 컨트롤을 선택하거나 엔터티를 끌어서 놓아 순서를 변경합니다.

   :::image type="content" source="media/reorder-match-rules.png" alt-text="일치 단계에서 엔터티가 처리되는 순서를 변경하는 옵션입니다.":::

1. **완료** 를 선택하여 규칙을 저장합니다.

## <a name="define-deduplication-on-a-match-entity"></a>일치 항목에서 중복 제거 정의

[엔터티 간 일치 규칙](#define-rules-for-match-pairs) 이외에 중복 제거 규칙을 지정할 수도 있습니다. *중복 제거* 은 레코드를 일치시킬 때 또 다른 프로세스입니다. 중복 레코드를 식별하고 이를 하나의 레코드로 병합합니다. 원본 레코드는 대체 ID를 사용하여 병합된 레코드에 연결됩니다.

중복 제거된 레코드는 엔터티 간 일치 프로세스에서 사용됩니다. 중복 제거는 개별 엔터티에서 발생하며 일치 쌍에 사용되는 모든 엔터티를 구성할 수 있습니다.

중복 제거 규칙을 지정하는 것은 필수가 아닙니다. 이러한 규칙이 구성되지 않은 경우 시스템 정의 규칙이 적용됩니다. 성능 향상을 위해 엔터티 데이터를 엔터티 간 일치에 전달하기 전에 모든 레코드를 단일 레코드로 결합합니다.

### <a name="add-deduplication-rules"></a>중복 제거 규칙 추가

1. **데이터** > **Unify** > **일치** 로 이동합니다.

1. **병합된 중복 항목** 섹션에서 **엔터티 설정** 을 선택합니다. 중복 제거 규칙이 이미 만들어진 경우 **편집** 을 선택합니다.

1. **기본 설정 병합** 창에서 중복 제거를 적용할 엔터티를 선택합니다.

1. 중복 레코드를 결합하는 방법을 지정하고 다음 세 가지 병합 옵션 중 하나를 선택하세요.
   - **가장 많이 채워진**: 가장 많이 채워진 특성 필드가 있는 레코드를 승자 레코드로 식별합니다. 기본 병합 옵션입니다.
   - **가장 최근**: 최신순으로 승자 기록을 식별합니다. 최신 성을 정의하려면 날짜 또는 숫자 필드가 필요합니다.
   - **가장 최근**: 최신순으로 승자 기록을 식별합니다. 최신 성을 정의하려면 날짜 또는 숫자 필드가 필요합니다.
 
   > [!div class="mx-imgBorder"]
   > ![중복 제거 규칙 1단계](media/match-selfconflation.png "중복 제거 규칙 1단계")
 
1. 엔터티가 선택되고 기본 설정 병합이 설정되면 **규칙 추가** 를 선택하여 엔터티 수준에서 중복 제거 규칙을 정의합니다.
   - **필드 선택** 은 해당 엔터티에서 사용 가능한 모든 필드를 나열합니다. 중복을 확인하려는 필드를 선택하십시오. 모든 단일 고객에게 고유한 필드를 선택하십시오. 예를 들어 이메일 주소 또는 이름, 도시 및 전화번호의 조합입니다.
   - 정규화 및 정밀도 설정을 지정합니다.
   - **조건 추가** 를 선택하여 조건을 더 정의합니다.
 
   > [!div class="mx-imgBorder"]
   > ![중복 제거 규칙 2단계](media/match-selfconflation-rules.png "중복 제거 규칙 2단계")

  엔터티에 대해 여러 중복 제거 규칙을 만들 수 있습니다. 

1. 이제 일치 프로세스를 실행하면 중복 제거 규칙에 정의된 조건에 따라 레코드가 그룹화됩니다. 레코드를 그룹화한 후 병합 정책이 적용되어 승자 레코드를 식별합니다.

1. 그런 다음 이 승자 레코드는 일치 품질을 개선하기 위해 비 승자 레코드(예: 대체 ID)와 함께 엔티티 간 일치에 전달됩니다.

1. 정의된 모든 사용자 지정 일치 규칙은 중복 제거 규칙을 덮어씁니다. 중복 제거 규칙이 일치하는 레코드를 식별하고 사용자 지정 일치 규칙이 해당 레코드와 일치하지 않도록 설정된 경우 이 두 레코드는 일치하지 않습니다.

1. [일치 프로세스를 실행](#run-the-match-process)한 다음, 키 메트릭 타일에서 중복 제거 통계가 표시됩니다.

### <a name="deduplication-output-as-an-entity"></a>엔터티로서 중복 제거 출력

중복 제거 프로세스는 일치 쌍의 모든 엔터티에 대해 새 엔터티를 만들어 중복 제거된 레코드를 식별합니다. 이러한 엔터티는 **엔티티** 페이지의 **시스템** 섹션에서 **Deduplication_DataSource_Entity** 라는 이름으로 **ConflationMatchPairs:CustomerInsights** 와 함께 찾을 수 있습니다.

중복 제거 출력 엔터티에는 다음 정보가 포함됩니다.
- ID / 키
  - 기본 키 필드 및 대체 ID 필드. 대체 ID 필드는 레코드에 대해 식별된 모든 대체 ID로 구성됩니다.
  - Deduplication_GroupId 필드는 지정된 중복 제거 필드를 기반으로 모든 유사한 레코드를 그룹화하는 엔터티 내에서 식별된 그룹 또는 클러스터를 보여줍니다. 이것은 시스템 처리 목적으로 사용됩니다. 지정된 수동 중복 제거 규칙이 없고 시스템 정의 중복 제거 규칙이 적용되는 경우 중복 제거 출력 엔터티에서 이 필드를 찾을 수 없습니다.
  - Deduplication_WinnerId: 이 필드에는 식별된 그룹 또는 클러스터의 승자 ID가 포함됩니다. Deduplication_WinnerId가 레코드의 기본 키 값과 같으면 레코드가 승자 레코드라는 의미입니다.
- 중복 제거 규칙을 정의하는 데 사용되는 필드입니다.
- 적용된 중복 제거 규칙과 일치 알고리즘에서 반환된 점수를 나타내는 규칙 및 점수 필드입니다.
   
## <a name="run-the-match-process"></a>일치 프로세스 실행

엔터티 간 일치 및 중복 제거 규칙을 포함하여 구성된 일치 규칙으로 일치 프로세스를 실행할 수 있습니다. 

**데이터** > **Unify** > **일치** 로 이동하고 그리고 **실행** 을 선택하여 프로세스를 시작합니다. 일치 알고리즘은 완료하는 데 약간의 시간이 걸리며 완료될 때까지 구성을 변경할 수 없습니다. 변경하기 위해 실행을 취소할 수 있습니다. 작업 상태를 선택하고 **프로그레스 세부 정보** 창에서 **작업 취소** 를 선택합니다.

성공적인 실행 결과와 통합 고객 프로필 엔터티를 **엔티티** 페이지에서 확인합니다. 통합 고객 엔티티는 **프로필** 섹션에서 **고객** 으로 불립니다. 첫 번째 성공적인 일치 실행은 통합 *고객* 엔터티를 실행합니다. 모든 후속 일치 실행은 해당 엔티티를 확장합니다.

> [!TIP]
> 작업/프로세스 [상태에는 6가지 유형](system.md#status-types)이 있습니다. 또한 대부분의 프로세스는 [다른 다운스트림 프로세스에 의존](system.md#refresh-policies)합니다. 프로세스 상태를 선택하여 전체 작업의 진행률에 대한 세부 사항을 볼 수 있습니다. 작업 중 하나를 선택한 다음 **자세히 보기** 참조를 선택하면, 처리 시간, 마지막 처리 날짜, 작업과 관련된 모든 오류 및 경고와 같은 추가 정보를 확인할 수 있습니다.

## <a name="review-and-validate-your-matches"></a>일치 검토 및 유효성 검사

**데이터** > **Unify** > **일치** 로 이동하여 일치 쌍의 품질을 평가하고 필요한 경우 구체화합니다.

페이지 상단의 타일에는 일치하는 레코드 및 중복 항목의 수를 요약하는 주요 메트릭이 표시됩니다.

:::image type="content" source="media/match-KPIs.png" alt-text="숫자와 세부 정보가 포함된 일치 페이지의 키 메트릭에 대한 잘린 스크린샷입니다.":::

- **고유한 원본 레코드** 는 마지막 일치 실행에서 처리된 개별 원본 레코드의 수를 표시합니다.
- **일치 및 일치하지 않는 레코드** 는 일치 규칙을 처리한 후 남아있는 고유 레코드 수를 강조 표시합니다.
- **일치하는 레코드만** 은 모든 매치 쌍에서 일치 수를 보여줍니다.

**일치하는 레코드 세부 정보** 테이블에서 각 일치 쌍의 결과와 규칙을 액세스할 수 있습니다. 일치 쌍에서 가져온 레코드 수를 성공적으로 일치된 레코드의 백분율과 비교합니다.

일치 쌍의 규칙을 검토하여 규칙 수준에서 성공적으로 일치된 레코드의 백분율을 확인합니다. 줄임표(...)를 선택한 다음 **일치 미리보기** 를 선택하여 규칙 수준에서 이러한 모든 레코드를 볼 수 있습니다. 일부 레코드를 살펴보고 올바르게 일치되었는지 확인하는 것이 좋습니다.

최적의 값을 찾으려면 조건에 대해 다른 정밀도 임계값을 시도하십시오.

  1. 실험할 규칙의 줄임표(...)를 선택하고 **편집** 을 선택합니다.

  2. 수정하려는 조건에서 정밀도 값을 변경하십시오.

  3. **프리뷰** 를 선택하여 선택한 조건에 대해 일치 및 일치하지 않는 레코드 수를 확인하십시오.

## <a name="manage-match-rules"></a>일치 규칙 관리

대부분의 일치 매개 변수를 재구성하고 미세 조정할 수 있습니다.

:::image type="content" source="media/match-rules-management.png" alt-text="일치 규칙 옵션이 있는 드롭다운 메뉴의 스크린샷입니다.":::

- 여러 규칙을 정의한 경우 **규칙의 순서를 변경** 합니다. **위로 이동** 과 **아래로 이동** 옵션을 선택하거나 끌어서 놓기로 일치 규칙을 재정렬할 수 있습니다.

- **편집** 을 선택하여 **규칙 조건을 변경** 하고 다른 분야를 선택하십시오.

- **규칙을 비활성화** 하여 일치 프로세스에서 제외하는 동안 일치 규칙을 유지합니다.

- **규칙 복제**: 일치 규칙을 정의했으며 수정 사항이 포함된 유사한 규칙을 만들려면 **복제** 를 선택합니다.

- **삭제** 기호를 선택하여 **규칙을 삭제** 합니다.

## <a name="specify-custom-match-conditions"></a>사용자 지정 맞춤 일치 조건 지정

특정 레코드가 항상 일치하거나 일치하지 않아야 하는 조건을 지정할 수 있습니다. 이러한 규칙을 업로드하여 표준 일치 프로세스를 재정의할 수 있습니다. 예를 들어, 레코드에 John Doe I와 John Doe II가 있는 경우 시스템은 이들을 한 사람으로 일치시킬 수 있습니다. 사용자 지정 일치 규칙을 사용하면 프로필이 다른 사람을 참조하도록 지정할 수 있습니다. 

1. **데이터** > **Unify** > **일치** 로 이동하고 **일치하는 레코드 세부 정보** 에서 **사용자 지정 일치** 를 선택합니다.

  :::image type="content" source="media/custom-match-create.png" alt-text="강조 표시된 사용자 지정 컨트롤이 있는 일치 규칙 섹션의 스크린샷입니다.":::

1. 사용자 지정 일치 규칙이 설정되지 않은 경우 더 많은 세부 정보가 있는 새로운 **사용자 지정 일치** 창을 볼 수 있습니다.

1. **템플릿에서 채우기** 를 선택하여 엔터티가 항상 일치해야 하는 레코드를 지정할 수 있는 템플릿 파일을 가져옵니다. "항상 일치" 레코드와 "절대 일치" 레코드를 두 개의 다른 파일로 따로 기입해야 합니다.

1. 템플릿에는 사용자 지정 일치에 사용할 엔터티 및 엔터티 기본 키 값을 지정하는 필드가 포함되어 있습니다. 예를 들어, *영업* 엔터티에서 기본 키 *12345* 가 *Contact* 엔터티에서 기본 키 *34567* 과 항상 일치하는 것을 원하는 경우 템플릿을 채웁니다.
    - Entity1: 영업
    - Entity1Key: 12345
    - Entity2: 연락처
    - Entity2Key: 34567

   동일한 템플릿 파일은 여러 엔터티의 사용자 지정 일치 레코드를 지정할 수 있습니다.
   
   엔터티에서 중복 제거에 대한 사용자 지정 일치를 지정하려면 엔터티1 및 엔터티2와 동일한 엔터티를 제공하고 다른 기본 키 값을 설정합니다.

1. 적용할 모든 재정의를 추가한 후 템플릿 파일을 저장합니다.

1. **데이터** > **데이터 원본** 으로 이동하여 새 엔터티로서 템플릿 파일을 수집합니다. 일단 수집되면 이를 사용하여 일치 구성을 지정할 수 있습니다.

1. 파일 및 엔터티를 업로드한 후 **사용자 지정 일치** 옵션을 다시 선택합니다. 포함할 엔터티를 지정하는 옵션이 표시됩니다. 드롭다운 메뉴에서 필요한 엔터티를 선택합니다.

   :::image type="content" source="media/custom-match-overrides.png" alt-text="사용자 지정 일치 시나리오에 대한 재정의를 선택하는 대화 상자의 스크린샷입니다.":::

1. **항상 일치** 및 **일치 없음** 에 사용할 엔터티를 선택하고 **완료** 를 선택합니다.

1. **일치** 페이지에서 **저장** 을 선택하여 사용자 지정 일치 구성을 적용합니다.

1. **일치** 페이지에서 **실행** 을 선택하여 일치 프로세스를 시작합니다. 다른 지정된 일치 규칙은 사용자 지정 일치 구성에 의해 재정의됩니다.

> [!TIP]
> **데이터** > **엔티티** 로 이동하고 **ConflationMatchPair** 엔터티를 리뷰하여 재정의가 적용되었는지 확인합니다.

## <a name="next-step"></a>다음 단계

하나 이상의 일치 쌍에 대한 매치 프로세스를 완료한 후 [**병합**](merge-entities.md) 항목을 통해 데이터에서 발생할 수 있는 모순을 해결할 수 있습니다.


[!INCLUDE[footer-include](../includes/footer-banner.md)]
