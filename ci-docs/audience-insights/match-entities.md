---
title: 데이터 통합 시 엔터티 일치
description: 엔터티를 일치시켜 통합 고객 프로필을 만듭니다.
ms.date: 10/14/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: mhart
ms.reviewer: adkuppa
manager: shellyha
ms.openlocfilehash: 05afd17b7f1b34f7f24a8fa8cb2dc32c1649d40f
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 02/15/2021
ms.locfileid: "5267486"
---
# <a name="match-entities"></a>엔터티 매칭

맵 단계를 완료하면 엔터티와 일치할 준비가 된 것입니다. 일치 단계에서는 데이터 집합을 통합된 고객 프로필 데이터 집합으로 결합하는 방법을 지정합니다. 일치 단계에는 [매핑된 엔터티가 두 개](map-entities.md) 이상 필요합니다.

## <a name="specify-the-match-order"></a>일치 순서를 지정합니다.

**데이터** > **통합** > **일치** 로 이동하고 **순서 설정** 을 선택하여 일치 단계를 시작합니다.

각 일치는 두 개 이상의 엔터티를 단일 엔터티로 통합하는 동시에 각 고유 고객 레코드를 유지합니다. 다음 예제에서는 **기본** 엔터티로 **ContactCSV: TestData**, **엔터티 2** 로 **WebAccountCSV: TestData** 및 **엔터티 3** 으로 **CallRecordSmall: TestData** 등 3개의 엔터티를 선택했습니다. 선택 항목 위의 다이어그램은 일치 순서가 실행되는 방법을 보여줍니다.

> [!div class="mx-imgBorder"]
> ![데이터 일치 순서 편집](media/configure-data-match-order-edit-page.png "데이터 일치 순서 편집")
  
**기본** 엔터티는 **엔터티 2** 와 일치합니다. 첫 번째 일치에서 발생하는 데이터 집합은 **엔터티 3** 과 일치합니다.
이 예제에서는 두 개의 일치 항목만 선택했지만 시스템은 더 많은 항목을 지원할 수 있습니다.

> [!IMPORTANT]
> **기본** 엔터티로 선택하는 엔터티는 통합 마스터 데이터 집합의 기초가 됩니다. 일치 단계 중에 선택된 추가 엔터티가 이 엔터티에 추가됩니다. 동시에 이것이 통합된 엔터티가 이 엔터티에 포함된 데이터를 *모두* 포함한다는 것을 의미하지는 않습니다.
>
> 엔터티의 계층 구조를 선택하는 데 도움이 되는 두 가지 고려 사항이 있습니다.
>
> - 고객에 대한 가장 완벽하고 신뢰할 수 있는 데이터를 보유하는 것을 고려하는 엔터티는 무엇입니까?
> - 방금 확인한 엔터티에 다른 엔터티(예: 이름, 전화 번호 또는 이메일 주소)가 공유하는 특성이 있습니까? 그렇지 않은 경우 두 번째로 가장 신뢰할 수 있는 엔터티를 선택합니다.

**완료** 를 선택하여 일치 순서를 저장합니다.

## <a name="define-rules-for-your-first-match-pair"></a>첫 번째 일치 쌍에 대한 규칙 정의

일치 순서를 지정하면 **일치** 페이지에 정의된 일치 항목이 표시됩니다. 일치 순서를 실행할 때까지 화면 상단의 타일은 비어 있습니다.

> [!div class="mx-imgBorder"]
> ![규칙 정의](media/configure-data-match-need-rules.png "규칙 정의")

**규칙 필요** 경고는 일치 쌍에 대해 일치하는 규칙이 정의되지 않았음을 나타냅니다. 일치 규칙은 특정 엔터티 쌍이 일치할 논리를 지정합니다.

1. 첫 번째 규칙을 정의하려면 일치 테이블(1)에서 해당 일치 행을 선택한 다음 **새 규칙 만들기**(2)를 선택하여 **규칙 정의** 창을 엽니다.

   > [!div class="mx-imgBorder"]
   > ![새 규칙 만들기](media/configure-data-match-new-rule2.png "새 규칙 만들기")

2. **규칙 편집** 창에서 해당 규칙에 대한 조건을 구성합니다. 각 조건은 필수 선택을 포함하는 두 행으로 표시됩니다.

   > [!div class="mx-imgBorder"]
   > ![새 규칙 창](media/configure-data-match-new-rule-condition.png "새 규칙 창")

   엔터티/필드(첫 번째) - 첫 번째 일치 쌍 엔터티에서 일치하는 데 사용되는 특성입니다. 예를 들어 전화 번호 또는 전자 메일 주소를 포함할 수 있습니다. 고객에게 고유할 수 있는 특성을 선택합니다.

   > [!TIP]
   > 활동 유형 특성을 기준으로 일치하지 않도록 합니다. 즉, 특성이 활동인 것처럼 보이는 경우 일치하는 기준이 잘못될 수 있습니다.  

   엔터티/필드(두 번째) - 두 번째 일치 쌍 엔터티에서 일치하는 데 사용되는 특성입니다.

   정규화 - **정규화 방법**: 선택한 특성에 대해 다양한 정규화 옵션을 사용할 수 있습니다. 예를 들어, 문장 부호를 제거하거나 공백을 제거합니다.

   조직 이름 정규화(미리 보기)의 경우 **유형(전화, 이름, 조직)** 을 선택할 수도 있습니다.

   > [!div class="mx-imgBorder"]
   > ![정규화-B2B](media/match-normalization-b2b.png "정규화-B2B")

   정밀도 수준 - 이 조건에 사용할 정밀도 수준입니다. 일치 조건에 대한 정밀도 수준을 설정하면 **기본** 및 **사용자 지정** 의 두 가지 유형이 있을 수 있습니다.  
   - 기본: 낮음, 중간, 높음 및 정확의 네 가지 옵션 중에서 선택할 수 있는 옵션을 제공합니다. 100%와 일치하는 레코드만 일치하도록 **정확** 을 선택합니다. 100% 동일하지 않은 레코드와 일치하도록 다른 수준 중 하나를 선택합니다.
   - 사용자 지정: 슬라이더를 사용하여 레코드가 **사용자 지정** 필드에 값을 일치하거나 입력하는 데 필요한 사용자 지정 백분율을 정의합니다. 시스템은 이 임계값을 통과한 레코드만 합성된 일치 쌍으로 일치합니다. 슬라이더의 값은 0에서 1 사이입니다. 따라서 0.64는 64%를 나타냅니다.

3. **완료** 를 선택하여 규칙을 저장합니다.

### <a name="add-multiple-conditions"></a>여러 조건 추가

여러 조건이 충족되는 경우에만 엔터티를 일치시키기 위해 AND 연산자를 통해 연결된 조건을 더 추가합니다.

1. **편집 규칙** 창에서 **조건 추가** 를 선택합니다. 기존 조건 옆의 제거 단추를 선택하여 조건을 삭제할 수도 있습니다.

2. **완료** 를 선택하여 규칙을 저장합니다.

## <a name="add-multiple-rules"></a>여러 규칙 추가

각 조건은 단일 특성 쌍에 적용되며 규칙은 조건 집합을 나타냅니다. 엔터티를 다른 특성 집합과 일치하도록 하려면 규칙을 더 추가할 수 있습니다.

1. 대상 그룹 인사이트에서 **데이터** > **통합** > **일치** 로 이동합니다.

2. 업데이트하려는 엔터티를 선택하고 **규칙 추가** 를 선택합니다.

3. [첫 번째 일치 쌍에 대한 규칙 정의](#define-rules-for-your-first-match-pair)에 설명된 절차를 따릅니다.

> [!NOTE]
> 규칙 순서가 중요합니다. 일치 알고리즘은 첫 번째 규칙에 따라 일치하려고 시도하며 첫 번째 규칙에 따라 일치하는 항목이 식별되지 않은 경우에만 두 번째 규칙을 계속합니다.

## <a name="define-deduplication-on-a-match-entity"></a>일치 항목에서 중복 제거 정의

위 섹션에 설명된 대로 상호 엔터티 일치 규칙을 지정하는 것과 함께 중복 제거 규칙을 지정할 수도 있습니다. *중복 제거* 는 과정입니다. 중복 레코드를 식별하고 이를 하나의 레코드로 병합하고 대체 ID를 사용하여 병합된 레코드에 모든 원본 레코드를 병합된 레코드에 연결합니다.

중복 제거된 레코드가 식별되면 해당 레코드가 상호 엔터티 일치 프로세스에 사용됩니다. 중복 제거는 엔터티 수준에서 구현되며 일치 프로세스에 사용되는 모든 엔터티에 적용할 수 있습니다.

### <a name="add-deduplication-rules"></a>중복 제거 규칙 추가

1. 대상 그룹 인사이트에서 **데이터** > **통합** > **일치** 로 이동합니다.

1. **병합된 중복 항목** 섹션에서 **엔터티 설정** 을 선택합니다.

1. **기본 설정 병합** 섹션에서 중복 제거를 적용할 엔터티를 선택합니다.

1. 중복 레코드를 병합하는 방법을 지정하고 다음 세 가지 병합 옵션 중 하나를 선택하세요.
   - *가장 많이 채워진*: 가장 많이 채워진 특성이 있는 레코드를 승자 레코드로 식별합니다. 기본 병합 옵션입니다.
   - *가장 최근*: 최신순으로 승자 기록을 식별합니다. 최신 성을 정의하려면 날짜 또는 숫자 필드가 필요합니다.
   - *가장 최근*: 최신순으로 승자 기록을 식별합니다. 최신 성을 정의하려면 날짜 또는 숫자 필드가 필요합니다.
 
   > [!div class="mx-imgBorder"]
   > ![중복 제거 규칙 1단계](media/match-selfconflation.png "중복 제거 규칙 1단계")
 
1. 엔터티가 선택되고 기본 설정 병합이 설정되면 **새 규칙 만들기** 를 선택하여 엔터티 수준에서 중복 제거 규칙을 정의합니다.
   - **필드 선택** 은 원본 데이터를 중복 제거하려는 해당 엔터티에서 사용 가능한 모든 필드를 나열합니다.
   - 상호 엔터티 일치에 지정된 것과 유사한 방식으로 정규화 및 정밀도 설정을 지정합니다.
   - **조건 추가** 를 선택하여 추가 조건을 정의할 수 있습니다.
 
   > [!div class="mx-imgBorder"]
   > ![중복 제거 규칙 2단계](media/match-selfconflation-rules.png "중복 제거 규칙 2단계")

  엔터티에 대해 여러 중복 제거 규칙을 만들 수 있습니다. 

1. 이제 일치 프로세스를 실행하면 중복 제거 규칙에 정의된 조건에 따라 레코드가 그룹화됩니다. 레코드를 그룹화한 후 병합 정책이 적용되어 승자 레코드를 식별합니다.

1. 그런 다음 이 승자 레코드는 일치 품질을 개선하기 위해 비 승자 레코드(예: 대체 ID)와 함께 엔티티 간 일치에 전달됩니다.

1. 항상 일치에 대해 정의 된 사용자 지정 일치 규칙은 중복 제거 규칙을 무시하고 일치하지 않습니다. 중복 제거 규칙이 일치하는 레코드를 식별하고 사용자 지정 일치 규칙이 해당 레코드와 일치하지 않도록 설정된 경우 이 두 레코드는 일치하지 않습니다.

1. 일치 프로세스를 실행하면 중복 제거 통계가 표시됩니다.
   
> [!NOTE]
> 중복 제거 규칙을 지정하는 것은 필수가 아닙니다. 이러한 규칙이 구성되지 않은 경우 시스템 정의 규칙이 적용됩니다. 성능 및 시스템 온전성을 향상시키기 위해 엔터티 데이터를 엔터티 간 일치에 전달하기 전에 기본 키와 일치 규칙의 필드에서 동일한 값 조합(정확히 일치)을 공유하는 모든 레코드를 단일 레코드로 축소합니다.

## <a name="run-your-match-order"></a>일치 순서 실행

엔터티 간 일치 및 중복 제거 규칙을 포함하여 일치 규칙을 정의한 후 일치 순서를 실행할 수 있습니다. **일치** 페이지에서 **실행** 을 선택하여 프로세스를 시작합니다. 일치 알고리즘을 완료하는 데 다소 시간이 걸릴 수 있습니다. 일치 프로세스가 완료될 때까지 **일치** 페이지에서 속성을 변경할 수 없습니다. **엔터티** 페이지에서 만든 통합된 고객 프로필 엔터티를 찾을 수 있습니다. 통합 고객 엔터티를 **ConflationMatchPairs: CustomerInsights** 라고 합니다.

추가 변경을 수행하고 단계를 다시 실행하기 위해 진행 중인 일치를 취소할 수 있습니다. **새로 고침 중...** 텍스트를 선택하고 나타나는 측면 창의 맨 아래에서 **작업 취소** 를 선택합니다.

일치 프로세스가 완료되면 **새로 고침 중...** 텍스트가 **성공** 으로 바뀌고 페이지의 모든 기능을 다시 사용할 수 있습니다.

첫 번째 일치 프로세스는 통합된 마스터 엔터티를 생성합니다. 이후의 모든 일치 실행은 해당 엔터티의 확장을 초래합니다.

> [!TIP]
> 작업/프로세스 [상태에는 6가지 유형](system.md#status-types)이 있습니다. 또한 대부분의 프로세스는 [다른 다운스트림 프로세스에 의존](system.md#refresh-policies)합니다. 프로세스 상태를 선택하여 전체 작업의 진행률에 대한 세부 사항을 볼 수 있습니다. 작업 중 하나를 선택한 다음 **자세히 보기** 참조를 선택하면, 처리 시간, 마지막 처리 날짜, 작업과 관련된 모든 오류 및 경고와 같은 추가 정보를 확인할 수 있습니다.

## <a name="deduplication-output-as-an-entity"></a>엔터티로서 중복 제거 출력
엔터티 간 일치의 일부로 생성된 통합 마스터 엔터티 외에도 중복 제거 프로세스는 일치 순서에서 모든 엔터티에 대한 새 엔터티를 생성하여 중복 제거된 레코드를 식별합니다. 이러한 엔터티는 **엔티티** 페이지의 **시스템** 섹션에서 **Deduplication_Datasource_Entity** 라는 이름으로 **ConflationMatchPairs:CustomerInsights** 와 함께 찾을 수 있습니다.

중복 제거 출력 엔터티에는 다음 정보가 포함됩니다.
- ID / 키
  - 기본 키 필드 및 대체 ID 필드. 대체 ID 필드는 레코드에 대해 식별된 모든 대체 ID로 구성됩니다.
  - Deduplication_GroupId 필드는 지정된 중복 제거 필드를 기반으로 모든 유사한 레코드를 그룹화하는 엔터티 내에서 식별된 그룹 또는 클러스터를 보여줍니다. 이것은 시스템 처리 목적으로 사용됩니다. 지정된 수동 중복 제거 규칙이 없고 시스템 정의 중복 제거 규칙이 적용되는 경우 중복 제거 출력 엔터티에서 이 필드를 찾을 수 없습니다.
  - Deduplication_WinnerId: 이 필드에는 식별된 그룹 또는 클러스터의 승자 ID가 포함됩니다. Deduplication_WinnerId가 레코드의 기본 키 값과 같으면 레코드가 승자 레코드라는 의미입니다.
- 중복 제거 규칙을 정의하는 데 사용되는 필드입니다.
- 적용된 중복 제거 규칙과 일치 알고리즘에서 반환된 점수를 나타내는 규칙 및 점수 필드입니다.

## <a name="review-and-validate-your-matches"></a>일치 검토 및 유효성 검사

일치 쌍의 품질을 평가하고 세분화합니다.

- **일치** 페이지에서 데이터에 대한 초기 인사이트를 보여주는 두 개의 타일을 찾을 수 있습니다.

  - **고유 고객**: 시스템이 식별한 고유 프로필 수를 표시합니다.
  - **일치하는 레코드**: 모든 일치 쌍에 대한 일치 횟수를 표시합니다.

- **일치 순서** 테이블에서 이 일치 쌍 엔터티에서 온 레코드 수와 성공적으로 일치하는 레코드의 백분율을 비교하여 각 일치 쌍의 결과를 평가할 수 있습니다.

- **일치 순서** 테이블에서 엔터티의 **규칙** 섹션에서 규칙 수준에서 성공적으로 일치하는 레코드의 백분율을 찾을 수 있습니다.  규칙 옆의 테이블 기호를 선택하면 규칙 수준에서 이러한 모든 레코드를 볼 수 있습니다. 레코드의 하위 집합을 검토하여 레코드가 올바르게 일치하는지 확인하는 것이 좋습니다.

- 조건 주위의 다양한 정밀도 임계값을 실험하여 최적의 값을 식별합니다.

  1. 실험할 일치 쌍 규칙에 대해 타원(...)을 선택하고 **편집** 을 선택합니다.

  2. 실험할 조건을 선택합니다. 각 기준은 **일치 규칙** 창에서 한 행으로 표시됩니다.

  3. **기준 미리 보기** 페이지에 표시되는 내용은 조건에 대해 선택한 정밀도 수준에 따라 다릅니다. 선택한 조건에 대해 일치하고 일치하지 않는 레코드 수를 찾습니다.

     다른 임계값 수준의 효과에 대한 풍부한 이해를 얻으십시오. 각 임계값 수준에서 일치하는 레코드 수를 비교하고 각 옵션에서 레코드를 볼 수 있습니다. 각 타일을 선택하고 테이블 섹션의 데이터를 검토합니다.

## <a name="optimize-your-matches"></a>일치 최적화

일부 일치 매개 변수를 다시 구성하여 품질을 향상시킵니다.

- **편집** 을 선택하여 **일치 순서를 변경** 하고 일치 순서 필드를 변경합니다.

  > [!div class="mx-imgBorder"]
  > ![데이터 일치 순서 편집](media/configure-data-match-order-edit.png "데이터 일치 순서 편집")

- 여러 규칙을 정의한 경우 **규칙의 순서를 변경** 합니다. 일치 규칙 그리드에서 **위로 이동** 및 **아래로 이동** 옵션을 선택하여 일치 규칙의 순서를 다시 정렬할 수 있습니다.

  > [!div class="mx-imgBorder"]
  > ![규칙 순서 변경](media/configure-data-change-rule-order.png "규칙 순서 변경")

- 일치 규칙을 정의하고 수정하여 유사한 규칙을 만들려면 **규칙을 복제** 합니다. 이렇게 하려면 **중복** 을 선택합니다.

  > [!div class="mx-imgBorder"]
  > ![규칙 복제](media/configure-data-duplicate-rule.png "규칙 복제")

- **규칙을 비활성화** 하여 일치 프로세스에서 제외하는 동안 일치 규칙을 유지합니다.

  > [!div class="mx-imgBorder"]
  > ![규칙 비활성화](media/configure-data-deactivate-rule.png "규칙 비활성화")

- **편집** 기호를 선택하여 **규칙을 편집** 합니다. 또한 다음과 같이 변경을 적용할 수 있습니다.

  - 조건에 대한 특성 변경: 특정 조건 행 내에서 새 특성을 선택합니다.
  - 조건의 임계값을 변경합니다. 정밀도 슬라이더를 조정합니다.
  - 조건에 대한 정규화 방법을 변경합니다. 정규화 메서드를 업데이트합니다.

## <a name="specify-your-custom-match-records"></a>사용자 지정 일치 레코드 지정

특정 레코드가 항상 일치하거나 일치하지 않아야 하는 조건을 지정할 수 있습니다. 이러한 규칙은 일치 프로세스에 일괄 업로드할 수 있습니다.

1. **일치 주문** 화면에서 **맞춤 검색** 옵션을 선택합니다.

   > [!div class="mx-imgBorder"]
   > ![사용자 지정 일치 만들기](media/custom-match-create.png "사용자 지정 일치 만들기")

2. 업로드된 엔터티가 없는 경우 몇 가지 세부 정보를 입력해야 하는 새로운 **사용자 지정 일치** 대화 상자가 표시됩니다. 이러한 세부 정보를 이전에 제공한 경우 8단계로 건너뜁니다.

   > [!div class="mx-imgBorder"]
   > ![새 사용자 지정 일치 대화 상자](media/custom-match-new-dialog-box.png "새 사용자 지정 일치 대화 상자")

3. **템플릿에서 채우기** 를 선택하여 엔터티가 항상 일치해야 하는 레코드를 지정할 수 있는 템플릿 파일을 가져옵니다. "항상 일치" 레코드와 "절대 일치" 레코드를 두 개의 다른 파일로 따로 기입해야 합니다.

4. 템플릿에는 사용자 지정 일치에 사용할 엔터티 및 엔터티 기본 키 값을 지정하는 필드가 포함되어 있습니다. 예를 들어 영업 엔터티의 기본 키 12345가 연락처 엔터티의 기본 키 34567과 항상 일치하도록 하려면 다음과 같이 지정해야 합니다.
    - Entity1: 영업
    - Entity1Key: 12345
    - Entity2: 연락처
    - Entity2Key: 34567

   동일한 템플릿 파일은 여러 엔터티의 사용자 지정 일치 레코드를 지정할 수 있습니다.
   
   엔터티에서 중복 제거에 대한 사용자 지정 일치를 지정하려면 엔터티1 및 엔터티2와 동일한 엔터티를 제공하고 다른 기본 키 값을 설정합니다.

5. 적용할 모든 재정의를 추가한 후 템플릿 파일을 저장합니다.

6. **데이터** > **데이터 원본** 으로 이동하여 새 엔터티로서 템플릿 파일을 수집합니다. 일단 수집되면 이를 사용하여 일치 구성을 지정할 수 있습니다.

7. 파일 및 엔터티를 업로드한 후 **사용자 지정 일치** 옵션을 다시 선택합니다. 포함할 엔터티를 지정하는 옵션이 표시됩니다. 드롭다운 메뉴에서 필요한 엔터티를 선택합니다.

   > [!div class="mx-imgBorder"]
   > ![사용자 지정 일치 재정의](media/custom-match-overrides.png "사용자 지정 일치 재정의")

8. **항상 일치** 및 **일치 없음** 에 사용할 엔터티를 선택하고 **완료** 를 선택합니다.

9. 방금 설정한 사용자 지정 검색 구성을 위해 **일치** 페이지에서 **일치** 를 선택합니다.

10. **일치** 페이지에서 **실행** 을 선택하여 일치 프로세스를 시작하면 사용자 정의 일치 구성이 적용됩니다. 일치하는 모든 시스템은 구성 집합에 의해 재정의됩니다.

11. 일치가 완료되면 **ConflationMatchPair** 엔터티를 확인하여 재재정이 컴플레이션 일치에 적용되는지 확인할 수 있습니다.

## <a name="next-step"></a>다음 단계

하나 이상의 일치 쌍에 대한 매치 프로세스를 완료한 후 [**병합**](merge-entities.md) 항목을 통해 데이터에서 발생할 수 있는 모순을 해결할 수 있습니다.


[!INCLUDE[footer-include](../includes/footer-banner.md)]