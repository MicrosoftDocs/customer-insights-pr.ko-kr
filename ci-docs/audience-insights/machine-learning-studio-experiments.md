---
title: Machine Learning Studio(클래식) 실험
description: Dynamics 365 Customer Insights의 Machine Learning Studio(클래식) 모델을 사용합니다.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669026"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="1d035-103">Azure Machine Learning Studio(클래식) 기반 모델을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="1d035-104">Dynamics 365 Customer Insights의 통합 데이터는 추가 비즈니스 인사이트를 생성할 수 있는 기계 학습 모델을 구축하기 위한 소스입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="1d035-105">Customer Insights는 Machine Learning Studio(클래식)와 통합되어 고유한 사용자 지정 모델을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="1d035-106">Azure Machine Learning에서 개발된 모델이 Customer Insights와 통합되는 방법을 보려면 [Azure Machine Learning 실험](azure-machine-learning-experiments.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="1d035-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="1d035-107">필수 구성 요소</span><span class="sxs-lookup"><span data-stu-id="1d035-107">Prerequisites</span></span>

- <span data-ttu-id="1d035-108">Customer Insights에 액세스</span><span class="sxs-lookup"><span data-stu-id="1d035-108">Access to Customer Insights</span></span>
- <span data-ttu-id="1d035-109">활성 Azure Enterprise 구독</span><span class="sxs-lookup"><span data-stu-id="1d035-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="1d035-110">통합 고객 프로필</span><span class="sxs-lookup"><span data-stu-id="1d035-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="1d035-111">[Azure Blob Storage로 엔터티 내보내기](export-azure-blob-storage.md) 설정</span><span class="sxs-lookup"><span data-stu-id="1d035-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="1d035-112">Machine Learning Studio 클래식 설정</span><span class="sxs-lookup"><span data-stu-id="1d035-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="1d035-113">첫 번째 단계에서 작업 영역을 만들고 Machine Learning Studio(클래식)를 열어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="1d035-114">[https://www.portal.azure.com](https://www.portal.azure.com/)로 이동하고 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="1d035-115">**리소스 만들기** 를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="1d035-116">**Machine Learning Studio 작업 영역** 을 검색해 **만들기** 를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="1d035-117">필요한 세부 정보를 입력하여 [작업 공간을 만듭니다](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="1d035-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="1d035-118">가져올 데이터 양에 따라 **웹 서비스 계획 가격 책정 계층** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="1d035-119">최상의 성능을 위해 지리적으로 가장 가까운 **위치** 를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="1d035-120">리소스를 생성하면 Machine Learning Studio 작업 영역 대시보드가 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="1d035-121">**Machine Learning Studio 실행** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azure Machine Learning Studio 사용자 인터페이스](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="1d035-123">Azure Machine Learning Studio 작업</span><span class="sxs-lookup"><span data-stu-id="1d035-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="1d035-124">이제 새 실험을 만들거나 샘플 갤러리에서 기존 실험 템플릿을 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="1d035-125">세 가지 표준 시나리오에 대한 샘플 실험이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="1d035-126">이탈 예측</span><span class="sxs-lookup"><span data-stu-id="1d035-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="1d035-127">고객 수명 값</span><span class="sxs-lookup"><span data-stu-id="1d035-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="1d035-128">제품 추천 또는 차선책</span><span class="sxs-lookup"><span data-stu-id="1d035-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="1d035-129">새 실험을 만들거나 갤러리의 실험 템플릿을 사용하는 경우 **데이터 가져오기** 속성을 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="1d035-130">안내식 환경을 사용하거나 데이터가 포함된 Azure Blob Storage에 액세스하기 위한 세부 정보를 직접 제공하세요.</span><span class="sxs-lookup"><span data-stu-id="1d035-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure Machine Learning Studio 실험](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="1d035-132">이제 사용자 지정 처리 파이프라인을 구축하여 데이터를 정리 및 전처리하고, 기능을 추출하고, 적합한 모델을 학습시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="1d035-133">모델 성능을 테스트하고 최적화합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="1d035-134">모델의 품질이 만족스러우면 **웹 서비스 설정** > **예측 웹 서비스** 를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="1d035-135">이 옵션은 학습 실험에서 예측 서비스로 학습된 모델과 기능화 파이프라인을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="1d035-136">예측 서비스는 학습 실험에 사용된 스키마를 사용하여 다른 입력 데이터 집합을 가져와 예측을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![예측 웹 서비스 설정](media/predictive-webservice-control.png)

1. <span data-ttu-id="1d035-138">예측 웹 서비스 실험이 성공하면 자동 예약을 위해 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="1d035-139">웹 서비스가 Customer Insights와 함께 작동하게 하려면 **웹 서비스 배포** > **웹 서비스 배포 [신규] 미리 보기** 를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="1d035-140">[웹 서비스 배포에 대해 자세히 알아보세요](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="1d035-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![예측 웹 서비스 배포](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="1d035-142">갤러리의 샘플 모델</span><span class="sxs-lookup"><span data-stu-id="1d035-142">Sample models from the gallery</span></span>

<span data-ttu-id="1d035-143">이 문서에서는 모델에 Contoso Hotel의 가상 시나리오를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="1d035-144">Contoso Hotel은 다음 데이터를 수집합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="1d035-145">호텔 숙박 활동으로 구성된 CRM 데이터.</span><span class="sxs-lookup"><span data-stu-id="1d035-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="1d035-146">데이터 집합에는 등록된 각 고객의 숙박 날짜에 대한 정보가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="1d035-147">또한 예약, 객실 유형, 지출 세부 정보 등에 대한 정보도 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="1d035-148">데이터는 2014년 1월부터 2018년 1월까지 4년에 걸쳐 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="1d035-149">호텔 투숙객의 고객 프로필.</span><span class="sxs-lookup"><span data-stu-id="1d035-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="1d035-150">이러한 프로필에는 이름, 생년월일, 우편 주소, 성별, 전화 번호 등 각 고객에 대한 정보가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="1d035-151">스파, 세탁, Wi-Fi, 택배 등 호텔에서 제공하는 서비스 이용.</span><span class="sxs-lookup"><span data-stu-id="1d035-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="1d035-152">이 정보는 등록된 각 고객에 대해 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="1d035-153">일반적으로 서비스 사용은 숙박과 관련이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="1d035-154">경우에 따라 호텔에 숙박하지 않고 고객이 서비스를 이용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="1d035-155">이탈 분석</span><span class="sxs-lookup"><span data-stu-id="1d035-155">Churn Analysis</span></span>

<span data-ttu-id="1d035-156">이탈 분석은 다양한 비즈니스 영역에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="1d035-157">이 예에서는 위에서 설명한 바와 같이 특히 호텔 서비스의 맥락에서 서비스 이탈을 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="1d035-158">다른 유형의 이탈 모델에 대한 시작점으로 사용할 수 있는 종합적인 모델 파이프라인의 작동 예제를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="1d035-159">이탈의 정의</span><span class="sxs-lookup"><span data-stu-id="1d035-159">Definition of Churn</span></span>

<span data-ttu-id="1d035-160">이탈의 정의는 시나리오에 따라 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="1d035-161">이 예에서 작년에 호텔을 방문하지 않은 게스트는 이탈로 표시되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="1d035-162">갤러리에서 실험 템플릿을 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="1d035-163">먼저 Azure Blob Storage에서 **호텔 숙박 활동**, **고객 데이터**, **서비스 사용 데이터** 에 대한 데이터를 가져와야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![이탈 모델에 대한 데이터 가져오기](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="1d035-165">기능화</span><span class="sxs-lookup"><span data-stu-id="1d035-165">Featurization</span></span>

<span data-ttu-id="1d035-166">이탈의 정의에 따라 먼저 레이블에 영향을 미칠 원시 기능을 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="1d035-167">그런 다음 이러한 원시 기능을 기계 학습 모델과 함께 사용할 수 있는 수치 기능으로 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="1d035-168">Customer Insights에서 데이터 통합이 이루어 지므로 *고객 ID* 를 사용하여 이러한 테이블을 포함될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![가져온 데이터 결합](media/join-imported-data.png)

<span data-ttu-id="1d035-170">이탈 분석을 위한 모델 구축을 위한 기능화는 약간 까다로울 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="1d035-171">데이터는 매일 새로운 호텔 활동이 기록되는 시간의 함수입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="1d035-172">기능화 중에 동적 데이터에서 정적 기능을 생성하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="1d035-173">이 경우 슬라이딩 윈도우가 1년인 호텔 활동에서 여러 기능을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="1d035-174">또한 원-핫 인코딩을 사용하여 객실 유형 또는 예약 유형과 같은 범주별 기능을 별도의 기능으로 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="1d035-175">최종 기능 목록:</span><span class="sxs-lookup"><span data-stu-id="1d035-175">Final list of features:</span></span>

| <span data-ttu-id="1d035-176">**숫자**</span><span class="sxs-lookup"><span data-stu-id="1d035-176">**Number**</span></span>  | <span data-ttu-id="1d035-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="1d035-177">**Original_Column**</span></span>          | <span data-ttu-id="1d035-178">**파생 기능**</span><span class="sxs-lookup"><span data-stu-id="1d035-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="1d035-179">1</span><span class="sxs-lookup"><span data-stu-id="1d035-179">1</span></span>           | <span data-ttu-id="1d035-180">객실 종류</span><span class="sxs-lookup"><span data-stu-id="1d035-180">Room Type</span></span>                    | <span data-ttu-id="1d035-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="1d035-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="1d035-182">2</span><span class="sxs-lookup"><span data-stu-id="1d035-182">2</span></span>           | <span data-ttu-id="1d035-183">예약 유형</span><span class="sxs-lookup"><span data-stu-id="1d035-183">Booking Type</span></span>                 | <span data-ttu-id="1d035-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="1d035-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="1d035-185">3</span><span class="sxs-lookup"><span data-stu-id="1d035-185">3</span></span>           | <span data-ttu-id="1d035-186">이동 범주</span><span class="sxs-lookup"><span data-stu-id="1d035-186">Travel Category</span></span>              | <span data-ttu-id="1d035-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="1d035-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="1d035-188">4</span><span class="sxs-lookup"><span data-stu-id="1d035-188">4</span></span>           | <span data-ttu-id="1d035-189">지출된 달러 비용</span><span class="sxs-lookup"><span data-stu-id="1d035-189">Dollars Spent</span></span>                | <span data-ttu-id="1d035-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="1d035-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="1d035-191">5</span><span class="sxs-lookup"><span data-stu-id="1d035-191">5</span></span>           | <span data-ttu-id="1d035-192">체크인 및 체크아웃 날짜</span><span class="sxs-lookup"><span data-stu-id="1d035-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="1d035-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="1d035-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="1d035-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="1d035-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="1d035-195">6</span><span class="sxs-lookup"><span data-stu-id="1d035-195">6</span></span>           | <span data-ttu-id="1d035-196">서비스 사용</span><span class="sxs-lookup"><span data-stu-id="1d035-196">Service Usage</span></span>                | <span data-ttu-id="1d035-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="1d035-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="1d035-198">모델 선택</span><span class="sxs-lookup"><span data-stu-id="1d035-198">Model selection</span></span>

<span data-ttu-id="1d035-199">이제 사용할 최적의 알고리즘을 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="1d035-200">이 경우 대부분의 기능은 범주 기능을 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="1d035-201">일반적으로 의사 결정 트리 기반 모델이 잘 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="1d035-202">숫자 기능만 있는 경우 신경망이 더 나은 선택이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="1d035-203">SVM(Support Vector Machine)도 이러한 상황에서 좋은 후보입니다. 그러나 최상의 성능을 얻기 위해서는 약간의 조정이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="1d035-204">첫 번째 모델로 **2클래스 향상된 의사 결정 트리** 를 선택하고 두 번째 모델로 **2클래스 SVM** 을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="1d035-205">Azure Machine Learning Studio를 사용하면 A/B 테스트를 수행할 수 있으므로 하나가 아닌 두 가지 모델로 시작하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="1d035-206">다음 이미지는 Azure Machine Learning Studio의 모델 학습 및 평가 파이프라인을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Azure Machine Learning Studio의 이탈 모델](media/azure-machine-learning-model.png)

<span data-ttu-id="1d035-208">또한 모델 최적화의 중요한 측면인 **순열 기능 중요성** 이라는 기술도 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="1d035-209">내장 모델은 특정 기능이 최종 예측에 미치는 영향에 대한 통찰력이 거의 또는 전혀 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="1d035-210">기능 중요도 계산기는 사용자 지정 알고리즘을 사용하여 특정 모델의 결과에 대한 개별 기능의 영향을 계산합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="1d035-211">기능 중요도는 +1에서 -1 사이로 정규화됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="1d035-212">부정적인 영향은 해당 기능이 결과에 반 직관적인 영향을 미치므로 모델에서 제거해야 함을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="1d035-213">긍정적인 영향은 기능이 예측에 크게 기여하고 있음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="1d035-214">이러한 값은 서로 다른 메트릭이므로 상관 계수가 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="1d035-215">자세한 내용은 [순열 기능 중요성](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="1d035-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="1d035-216">전체 [이탈 실험은 Azure AI Gallery에서 사용할 수 있습니다](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="1d035-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="1d035-217">고객 평생 가치 예측</span><span class="sxs-lookup"><span data-stu-id="1d035-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="1d035-218">CLTV(고객 평생 가치) 계산은 기업이 고객을 평가하고 분류하는 데 사용할 수 있는 주요 지표 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="1d035-219">호텔 비즈니스의 경우 고객을 아는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="1d035-220">예를 들어 좋은 고객을 구성하는 요소를 이해하는 것은 중요한 정보입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="1d035-221">이는 호텔 경영진이 고액 고객을 만족시키기 위해 집중하고 개선해야 하는 기능을 평가하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="1d035-222">이러한 결정은 판매 및 수입에 직접적인 영향을 미칠 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="1d035-223">CLTV의 정의</span><span class="sxs-lookup"><span data-stu-id="1d035-223">Definition of CLTV</span></span>

<span data-ttu-id="1d035-224">이 예에서는 고객의 CLTV를 고객이 향후 365일 동안 지출할 것으로 예상되는 총 금액으로 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="1d035-225">우리는 이 가치를 예측하기 위해 모든 고객의 지난 3년간의 데이터를 사용할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="1d035-226">기능화</span><span class="sxs-lookup"><span data-stu-id="1d035-226">Featurization</span></span>

<span data-ttu-id="1d035-227">이 경우 기능화는 이탈 시나리오와 매우 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="1d035-228">그러나 레이블과 예측 값은 위에 정의된 것과 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="1d035-229">모델 선택</span><span class="sxs-lookup"><span data-stu-id="1d035-229">Model selection</span></span>

<span data-ttu-id="1d035-230">CLTV를 예측하는 것은 예측 값이 양의 값을 갖는 연속 변수이기 때문에 회귀 문제입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="1d035-231">기능 속성에 따라 **향상된 의사 결정 트리 회귀** 를 하나의 알고리즘으로 **신경망** 회귀를 모델 훈련을 위한 또 다른 알고리즘으로 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="1d035-232">제품 추천 또는 차선책</span><span class="sxs-lookup"><span data-stu-id="1d035-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="1d035-233">호텔 시나리오에서 제품 추천은 호텔이 고객에게 제공하는 서비스를 추천하는 것으로 해석됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="1d035-234">목표는 고객의 사용이 극대화되도록 고객에게 적합한 서비스를 선택하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="1d035-235">비디오 스트리밍 서비스 사용자를 위한 영화 추천과 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="1d035-236">제품 추천 또는 차선책의 정의</span><span class="sxs-lookup"><span data-stu-id="1d035-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="1d035-237">호텔 고객의 관심사에 따라 최상의 매칭 서비스를 제공하여 서비스 이용 금액을 극대화하는 것을 목표로 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="1d035-238">기능화</span><span class="sxs-lookup"><span data-stu-id="1d035-238">Featurization</span></span>

<span data-ttu-id="1d035-239">이탈 모델과 마찬가지로, 우리는 CustomerID별로 일관되게 추천을 구축하기 위해 호텔 ServiceCustomerID와 CustomerID를 결합하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![추천 모델의 기능화](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="1d035-241">데이터는 세 가지 다른 엔터티에서 제공되며 기능은 이들에서 파생됩니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="1d035-242">추천의 기능화는 이탈 또는 CLTV 시나리오와 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="1d035-243">추천 모델에는 세 가지 기능 집합 형식의 입력 데이터가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="1d035-244">모델 선택</span><span class="sxs-lookup"><span data-stu-id="1d035-244">Model selection</span></span>

<span data-ttu-id="1d035-245">우리는 **매치박스 추천 학습** 이라는 알고리즘을 사용하여 추천 모델을 교육하여 제품 또는 서비스를 예측합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![제품 추천 알고리즘](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="1d035-247">세 개의 **매치박스 추천 학습** 모델에 대한 입력 포트는 교육 서비스 사용 데이터, 고객 설명(선택 사항) 및 서비스 설명을 취합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="1d035-248">모델을 평가하는 방법에는 세 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="1d035-249">하나는 NDCG(Normalized Discounted Cumulative Gain) 점수를 계산하여 등급 항목의 순위를 매기는 모델 평가용입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="1d035-250">이 실험에서 NDCG 점수는 0.97입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="1d035-251">다른 두 가지 옵션은 전체 권장 서비스 카탈로그에서 모델을 평가하거나 사용자가 이전에 사용하지 않은 항목에 대해서만 평가하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="1d035-252">전체 서비스 카탈로그의 권장 사항 배포를 자세히 살펴보면 전화, Wi-Fi 및 택배가 가장 권장되는 서비스임을 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="1d035-253">이것은 서비스 소비 데이터의 분포에서 찾은 것과 일치합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![추천 모델 출력](media/azure-machine-learning-model-output.png)

<span data-ttu-id="1d035-255">전체 [제품 추천 실험은 Azure AI Gallery에서 액세스할 수 있습니다.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="1d035-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="1d035-256">사용자 지정 모델 통합</span><span class="sxs-lookup"><span data-stu-id="1d035-256">Integrate custom models</span></span>

<span data-ttu-id="1d035-257">Customer Insights에서 이러한 예측을 사용하려면 고객 ID와 함께 예측을 **내보내야** 합니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="1d035-258">원본 데이터를 내보내는 [동일한 Azure Blob 저장소 위치로 내보냅니다](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs).</span><span class="sxs-lookup"><span data-stu-id="1d035-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="1d035-259">예측 웹 서비스를 정기적으로 실행하고 점수가 업데이트되도록 예약할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="1d035-260">사용자 지정 모델에서 생성된 데이터를 사용하여 고객 데이터를 더욱 보강할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1d035-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="1d035-261">자세한 내용은 [사용자 지정 기계 학습 모델](custom-models.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="1d035-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
